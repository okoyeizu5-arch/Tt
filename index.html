<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>MB Exam Study Planner</title>
    <script crossorigin src="https://unpkg.com/react@18/umd/react.production.min.js"></script>
    <script crossorigin src="https://unpkg.com/react-dom@18/umd/react-dom.production.min.js"></script>
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="manifest" href="manifest.json">
    
    <style>
        body {
            margin: 0;
            padding: 0;
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', 'Roboto', 'Oxygen', 'Ubuntu', 'Cantarell', sans-serif;
        }
    </style>
</head>
<body>
    <div id="root"></div>

    <script type="text/babel">
        const { useState, useEffect } = React;

        // Lucide React Icons as SVG components
        const Calendar = ({ size = 24, className = "" }) => (
            <svg width={size} height={size} viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round" className={className}>
                <rect x="3" y="4" width="18" height="18" rx="2" ry="2"></rect>
                <line x1="16" y1="2" x2="16" y2="6"></line>
                <line x1="8" y1="2" x2="8" y2="6"></line>
                <line x1="3" y1="10" x2="21" y2="10"></line>
            </svg>
        );

        const CheckCircle2 = ({ size = 24, className = "" }) => (
            <svg width={size} height={size} viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round" className={className}>
                <circle cx="12" cy="12" r="10"></circle>
                <path d="m9 12 2 2 4-4"></path>
            </svg>
        );

        const Circle = ({ size = 24, className = "" }) => (
            <svg width={size} height={size} viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round" className={className}>
                <circle cx="12" cy="12" r="10"></circle>
            </svg>
        );

        const BookOpen = ({ size = 24, className = "" }) => (
            <svg width={size} height={size} viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round" className={className}>
                <path d="M2 3h6a4 4 0 0 1 4 4v14a3 3 0 0 0-3-3H2z"></path>
                <path d="M22 3h-6a4 4 0 0 0-4 4v14a3 3 0 0 1 3-3h7z"></path>
            </svg>
        );

        const ChevronDown = ({ size = 24, className = "" }) => (
            <svg width={size} height={size} viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round" className={className}>
                <polyline points="6 9 12 15 18 9"></polyline>
            </svg>
        );

        const ChevronUp = ({ size = 24, className = "" }) => (
            <svg width={size} height={size} viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round" className={className}>
                <polyline points="18 15 12 9 6 15"></polyline>
            </svg>
        );

        const MBExamPlanner = () => {
            const [selectedSubject, setSelectedSubject] = useState('all');
            const [completedTopics, setCompletedTopics] = useState({});
            const [expandedDays, setExpandedDays] = useState({});

            // Load saved progress from localStorage
            useEffect(() => {
                const saved = localStorage.getItem('mbExamProgress');
                if (saved) {
                    setCompletedTopics(JSON.parse(saved));
                }
                const savedExpanded = localStorage.getItem('mbExamExpanded');
                if (savedExpanded) {
                    setExpandedDays(JSON.parse(savedExpanded));
                }
            }, []);

            // Save progress to localStorage
            useEffect(() => {
                localStorage.setItem('mbExamProgress', JSON.stringify(completedTopics));
            }, [completedTopics]);

            useEffect(() => {
                localStorage.setItem('mbExamExpanded', JSON.stringify(expandedDays));
            }, [expandedDays]);

            // Nigerian Medical Curriculum Topics
            const curriculum = {
                biochemistry: {
                    name: "Biochemistry",
                    color: "bg-blue-500",
                    topics: [
                        "Carbohydrate metabolism (Glycolysis, TCA cycle, Gluconeogenesis)",
                        "Lipid metabolism (Î²-oxidation, Lipogenesis, Ketone bodies)",
                        "Protein metabolism (Amino acid metabolism, Urea cycle)",
                        "Nucleic acid metabolism (Purine & Pyrimidine synthesis)",
                        "Enzymes (Classification, Kinetics, Inhibition)",
                        "Vitamins and their deficiencies",
                        "Minerals and trace elements",
                        "Acid-base balance and buffers",
                        "Hemoglobin and disorders",
                        "Clinical biochemistry (Liver function, Kidney function tests)",
                        "Nutrition and energy metabolism",
                        "Hormones and signal transduction"
                    ]
                },
                physiology: {
                    name: "Physiology",
                    color: "bg-green-500",
                    topics: [
                        "Cardiovascular system (Heart physiology, ECG, Blood pressure)",
                        "Respiratory system (Mechanics of breathing, Gas exchange)",
                        "Renal physiology (GFR, Tubular function, Acid-base)",
                        "Gastrointestinal physiology (Digestion, Absorption)",
                        "Nervous system (Neuron physiology, Synaptic transmission)",
                        "Endocrine system (Hypothalamus, Pituitary, Thyroid)",
                        "Reproductive physiology (Male & Female)",
                        "Blood and body fluids",
                        "Muscle physiology (Skeletal, Smooth, Cardiac)",
                        "Sensory physiology (Vision, Hearing, Taste)",
                        "Temperature regulation",
                        "Exercise physiology and adaptations"
                    ]
                },
                anatomy: {
                    name: "Gross Anatomy",
                    color: "bg-red-500",
                    topics: [
                        "Upper limb (Bones, Muscles, Nerves, Vessels)",
                        "Lower limb (Bones, Muscles, Nerves, Vessels)",
                        "Thorax (Thoracic wall, Mediastinum, Heart, Lungs)",
                        "Abdomen (Abdominal wall, Peritoneum, GI tract)",
                        "Pelvis and perineum",
                        "Head and neck (Skull, Face, Neck triangles)",
                        "Back and vertebral column",
                        "Central nervous system (Brain, Spinal cord)",
                        "Peripheral nervous system",
                        "Cardiovascular system anatomy",
                        "Lymphatic system",
                        "Surface anatomy and clinical correlations"
                    ]
                },
                embryology: {
                    name: "Embryology",
                    color: "bg-purple-500",
                    topics: [
                        "Gametogenesis (Spermatogenesis, Oogenesis)",
                        "Fertilization and implantation",
                        "Early development (Weeks 1-3)",
                        "Embryonic period (Weeks 4-8)",
                        "Fetal period and growth",
                        "Development of cardiovascular system",
                        "Development of respiratory system",
                        "Development of digestive system",
                        "Development of urogenital system",
                        "Development of nervous system",
                        "Development of musculoskeletal system",
                        "Congenital anomalies and teratogens"
                    ]
                }
            };

            // Generate 14-day study schedule
            const generateSchedule = () => {
                const schedule = [];
                const allTopics = [];
                
                // Collect all topics with subject info
                Object.keys(curriculum).forEach(subject => {
                    curriculum[subject].topics.forEach(topic => {
                        allTopics.push({ subject, topic, color: curriculum[subject].color });
                    });
                });

                // Distribute topics across 14 days
                const topicsPerDay = Math.ceil(allTopics.length / 14);
                
                for (let day = 0; day < 14; day++) {
                    const startIndex = day * topicsPerDay;
                    const endIndex = Math.min(startIndex + topicsPerDay, allTopics.length);
                    const dayTopics = allTopics.slice(startIndex, endIndex);
                    
                    const date = new Date();
                    date.setDate(date.getDate() + day + 1);
                    
                    schedule.push({
                        day: day + 1,
                        date: date.toLocaleDateString('en-NG', { weekday: 'short', month: 'short', day: 'numeric' }),
                        topics: dayTopics
                    });
                }
                
                return schedule;
            };

            const schedule = generateSchedule();

            const toggleTopic = (day, topicIndex) => {
                const key = `${day}-${topicIndex}`;
                setCompletedTopics(prev => ({
                    ...prev,
                    [key]: !prev[key]
                }));
            };

            const toggleDay = (day) => {
                setExpandedDays(prev => ({
                    ...prev,
                    [day]: !prev[day]
                }));
            };

            const getProgress = () => {
                const total = schedule.reduce((acc, day) => acc + day.topics.length, 0);
                const completed = Object.values(completedTopics).filter(Boolean).length;
                return { completed, total, percentage: Math.round((completed / total) * 100) };
            };

            const getDayProgress = (dayTopics, dayNum) => {
                const completed = dayTopics.filter((_, idx) => completedTopics[`${dayNum}-${idx}`]).length;
                return Math.round((completed / dayTopics.length) * 100);
            };

            const getSubjectProgress = (subject) => {
                let total = 0;
                let completed = 0;
                schedule.forEach(day => {
                    day.topics.forEach((t, idx) => {
                        if (t.subject === subject) {
                            total++;
                            if (completedTopics[`${day.day}-${idx}`]) completed++;
                        }
                    });
                });
                return { completed, total, percentage: total > 0 ? Math.round((completed / total) * 100) : 0 };
            };

            const progress = getProgress();

            const filteredSchedule = selectedSubject === 'all' 
                ? schedule 
                : schedule.map(day => ({
                    ...day,
                    topics: day.topics.filter(t => t.subject === selectedSubject)
                })).filter(day => day.topics.length > 0);

            return (
                <div className="min-h-screen bg-gradient-to-br from-blue-50 to-indigo-100 p-4">
                    <div className="max-w-6xl mx-auto">
                        {/* Header */}
                        <div className="bg-white rounded-lg shadow-lg p-6 mb-6">
                            <h1 className="text-3xl font-bold text-gray-800 mb-2 flex items-center gap-2">
                                <BookOpen className="text-indigo-600" />
                                MB Exam Study Planner
                            </h1>
                            <p className="text-gray-600">Nigerian Medical Curriculum - 14 Day Study Plan</p>
                            
                            {/* Overall Progress */}
                            <div className="mt-4 bg-gray-50 rounded-lg p-4">
                                <div className="flex justify-between items-center mb-2">
                                    <span className="font-semibold text-gray-700">Overall Progress</span>
                                    <span className="text-indigo-600 font-bold">{progress.percentage}%</span>
                                </div>
                                <div className="w-full bg-gray-200 rounded-full h-3">
                                    <div 
                                        className="bg-indigo-600 h-3 rounded-full transition-all duration-500"
                                        style={{ width: `${progress.percentage}%` }}
                                    />
                                </div>
                                <p className="text-sm text-gray-600 mt-2">
                                    {progress.completed} of {progress.total} topics completed
                                </p>
                            </div>
                        </div>

                        {/* Subject Filter */}
                        <div className="bg-white rounded-lg shadow-lg p-4 mb-6">
                            <h2 className="font-semibold text-gray-700 mb-3">Filter by Subject</h2>
                            <div className="grid grid-cols-2 md:grid-cols-5 gap-3">
                                <button
                                    onClick={() => setSelectedSubject('all')}
                                    className={`p-3 rounded-lg font-medium transition-all ${
                                        selectedSubject === 'all' 
                                            ? 'bg-indigo-600 text-white shadow-md' 
                                            : 'bg-gray-100 text-gray-700 hover:bg-gray-200'
                                    }`}
                                >
                                    All Subjects
                                </button>
                                {Object.entries(curriculum).map(([key, subject]) => {
                                    const subjectProgress = getSubjectProgress(key);
                                    return (
                                        <button
                                            key={key}
                                            onClick={() => setSelectedSubject(key)}
                                            className={`p-3 rounded-lg font-medium transition-all ${
                                                selectedSubject === key 
                                                    ? `${subject.color} text-white shadow-md` 
                                                    : 'bg-gray-100 text-gray-700 hover:bg-gray-200'
                                            }`}
                                        >
                                            <div>{subject.name}</div>
                                            <div className="text-xs mt-1 opacity-90">
                                                {subjectProgress.completed}/{subjectProgress.total}
                                            </div>
                                        </button>
                                    );
                                })}
                            </div>
                        </div>

                        {/* Study Schedule */}
                        <div className="space-y-4">
                            {filteredSchedule.map((day) => {
                                const dayProgress = getDayProgress(day.topics, day.day);
                                const isExpanded = expandedDays[day.day] !== false; // Default to expanded
                                
                                return (
                                    <div key={day.day} className="bg-white rounded-lg shadow-lg overflow-hidden">
                                        <div 
                                            className="bg-gradient-to-r from-indigo-600 to-indigo-700 text-white p-4 cursor-pointer hover:from-indigo-700 hover:to-indigo-800 transition-all"
                                            onClick={() => toggleDay(day.day)}
                                        >
                                            <div className="flex justify-between items-center">
                                                <div className="flex items-center gap-3">
                                                    <Calendar size={24} />
                                                    <div>
                                                        <h3 className="font-bold text-lg">Day {day.day}</h3>
                                                        <p className="text-indigo-100 text-sm">{day.date}</p>
                                                    </div>
                                                </div>
                                                <div className="flex items-center gap-4">
                                                    <div className="text-right">
                                                        <div className="text-sm opacity-90">{dayProgress}% Complete</div>
                                                        <div className="text-xs opacity-75">{day.topics.length} topics</div>
                                                    </div>
                                                    {isExpanded ? <ChevronUp size={24} /> : <ChevronDown size={24} />}
                                                </div>
                                            </div>
                                            
                                            {/* Mini progress bar */}
                                            <div className="w-full bg-indigo-800 rounded-full h-2 mt-3">
                                                <div 
                                                    className="bg-white h-2 rounded-full transition-all duration-500"
                                                    style={{ width: `${dayProgress}%` }}
                                                />
                                            </div>
                                        </div>

                                        {isExpanded && (
                                            <div className="p-4">
                                                <div className="space-y-2">
                                                    {day.topics.map((item, idx) => {
                                                        const isCompleted = completedTopics[`${day.day}-${idx}`];
                                                        return (
                                                            <div
                                                                key={idx}
                                                                onClick={() => toggleTopic(day.day, idx)}
                                                                className={`flex items-start gap-3 p-3 rounded-lg cursor-pointer transition-all ${
                                                                    isCompleted 
                                                                        ? 'bg-green-50 border-2 border-green-200' 
                                                                        : 'bg-gray-50 hover:bg-gray-100 border-2 border-transparent'
                                                                }`}
                                                            >
                                                                {isCompleted ? (
                                                                    <CheckCircle2 className="text-green-600 flex-shrink-0 mt-0.5" size={20} />
                                                                ) : (
                                                                    <Circle className="text-gray-400 flex-shrink-0 mt-0.5" size={20} />
                                                                )}
                                                                <div className="flex-1">
                                                                    <div className="flex items-center gap-2 mb-1">
                                                                        <span className={`text-xs font-semibold px-2 py-1 rounded ${item.color} text-white`}>
                                                                            {curriculum[item.subject].name}
                                                                        </span>
                                                                    </div>
                                                                    <p className={`font-medium ${isCompleted ? 'text-green-800 line-through' : 'text-gray-800'}`}>
                                                                        {item.topic}
                                                                    </p>
                                                                </div>
                                                            </div>
                                                        );
                                                    })}
                                                </div>
                                            </div>
                                        )}
                                    </div>
                                );
                            })}
                        </div>

                        {/* Footer Stats */}
                        <div className="bg-white rounded-lg shadow-lg p-6 mt-6 mb-6">
                            <h3 className="font-bold text-gray-800 mb-4">Study Statistics</h3>
                            <div className="grid grid-cols-2 md:grid-cols-4 gap-4">
                                {Object.entries(curriculum).map(([key, subject]) => {
                                    const stats = getSubjectProgress(key);
                                    return (
                                        <div key={key} className="text-center p-3 bg-gray-50 rounded-lg">
                                            <div className={`w-12 h-12 ${subject.color} rounded-full mx-auto mb-2 flex items-center justify-center text-white font-bold`}>
                                                {stats.percentage}%
                                            </div>
                                            <div className="font-semibold text-gray-700 text-sm">{subject.name}</div>
                                            <div className="text-xs text-gray-600">{stats.completed}/{stats.total} topics</div>
                                        </div>
                                    );
                                })}
                            </div>
                        </div>
                    </div>
                </div>
            );
        };

        ReactDOM.render(<MBExamPlanner />, document.getElementById('root'));
    </script>
</body>
</html>
